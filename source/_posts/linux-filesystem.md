---
title: linux基础-文件系统、权限
date: 2023-02-17 08:44:05
updated:
categories:
tags:
---

## 文件系统
Linux 系统将文件存储在单个目录结构中，这个目录被称为虚拟目录（virtual directory）中。虚拟目录结构只包含一个称为根（root）目录的基础目录。

Linux虚拟目录中比较复杂的部分是它如何协调管理各个存储设备。在Linux PC上安装的第一块硬盘称为根驱动器。根驱动器包含了虚拟目录的核心，其他目录都是从那里开始构建的。Linux会在根驱动器上创建一些特别的目录，我们称之为挂载点（mount point）。挂载点是虚拟目录中用于分配额外存储设备的目录。虚拟目录会让文件和目录出现在这些挂载点目录中，然而实际上它们却存储在另外一个驱动器中。

#### 常见目录及用途
|  目录 | 用途|
|--|--|
|/|根目录，通常不会在此存储文件|
|/bin|二进制目录，存放许多用户级的GNU工具|
|/boot|启动目录，存放启动文件|
|/dev|设备目录，该目录中主要存放的是外接设备，例如盘、其他的光盘等。在其中的外接设备是不能直接被使用的，需要挂载（类似windows下的分配盘符）。|
|/etc | 系统配置文件目录|
|/home | 家目录，除 root 以外其他用户的家目录都在此|
|/lib| 库目录，存放系统和应用程序的库文件|
|/mnt|挂载目录，当外接设备需要挂载的时候，就需要挂载到mnt目录下|
|/opt|常用于存放第三方软件包和数据文件|
|/proc|进程目录，存放现有硬件及当前进程的相关信息|
|/root| root 用户的家目录|
|/sbin|系统二进制目录，此目录中的文件必须有 super 权限才能执行|
|/run| 运行目录，存放系统运行时的数据|
|/srv| 服务目录，存放本地服务的相关文件|
|/sys| 系统目录，存放系统硬件信息的相关文件|
|/tmp| 临时目录，存放临时文件|
|/usr|用户二进制目录，大量用户级的GNU工具和数据都存在这|
|/var|可变目录，存储经常变化的文件，如日志文件|

## 权限介绍
> Linux系统一般将文件可存/取访问的身份分为3个类别：owner、group、others，且3种身份各有read、write、execute等权限。

在 Linux 中的读、写、执行的具体权限如下：
#### 读权限
- 对文件夹来说，会影响用户是否能够列出目录结构。
- 对文件来说，会影响用户是否可以查看文件的内容。
#### 写权限
- 对文件夹来说，会影响用户是否能够在文件夹下*创建、删除、复制到、移动到* 文档。
- 对文件来说，会权限影响用户是否可以*编辑*文件的内容。
#### 执行权限
- 一般都是针对文件，特别是脚本文件。

### 身份介绍
> Linux 中用户身份可以分为 owner、group、others 三种。
- owner： 文件身份的所有者，默认为文档的创建者。
- group：与文件所有者同组的用户。
- others：除 owner、group 以外的用户。
- root：超级用户，在 Linux 中拥有最大的权限。

## 权限设置

Linux 中可以通过数字代表各身份的权限，读：4，写：2，执行：1。通过 chmod 命令可以修改某个文件、目录的权限。

#### chmod
**语法：** `chmod [选项] [权限] [文件、目录]`

**选项**：
- `-r` ：递归处理，通常用于文件夹操作。

**执行删除、复制等文件操作时，用户首先要文件的对应权限，其次还需要有文件所在文件夹的权限！**

#### chown
**功能：**修改文件的 owner、group信息。 

**语法：** `chown [选项] [用户名] [文件、目录]`

**选项**：
- `-r` ：递归处理，通常用于文件夹操作。

**`chown [用户名:用户组] [文件、目录]` 可以一次性修改文件的 owner、group**

## sudo
> 有一些场景，普通用户无法操作需要 root 的执行权限，root又不想透露自己的密码，此时root可以给该用户设置 sudo 让用户拥有一些文件、命令的操作权限。

#### 配置 sudo
sudo 的配置文件路径为 ` /etc/sudoers`，该文件无法直接使用 vim 进行编辑，需要编辑直接输入命令 `visudo` 即可。

![31185_69E1A54BF3894346AEF6442713FAFF43.jpg](https://s2.loli.net/2023/03/03/slxbpk9DLhC7BRj.png)

- root 表示用户名，如果要配置用户组可以写成 `%组名`；
- ALL 表示预先登陆的主机；
- (ALL) 表示以谁的身份执行，ALL代表 root 身份；
- ALL 表示当前用户可以执行的命令，多个命令使用`,`分割。*在写sudo规则的时候不建议写直接形式的命令，而是写命令的完整路径。*

![31185_1B40D74F9F1049059F4FF2894789B2E9.jpg](https://s2.loli.net/2023/03/03/bdfM5RFPvagSN6l.png)

如上图所示，设置了 test 用户可以使用 sudo 执行 useradd passwd 命令。
